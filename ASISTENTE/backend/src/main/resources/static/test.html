<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test Login</title>
</head>
<body>
    <h1>Test del Login</h1>
    
    <form id="form-login">
        <div>
            <label for="nombre">Nombre del Usuario</label>
            <input type="text" id="nombre" name="nombre" placeholder="Ingrese su nombre" required>
        </div>
        
        <div>
            <label for="correo">Correo:</label>
            <input type="email" id="correo" name="correo" placeholder="Ingrese su correo" required>
        </div>
        
        <div>
            <label for="contrase√±a">Contrase√±a:</label>
            <input type="password" id="contrase√±a" name="contrase√±a" placeholder="Ingrese su contrase√±a" required>
        </div>
        
        <button type="submit">Iniciar Sesi√≥n</button>
        <div id="mensaje-exito" style="margin-top: 10px; font-weight: bold; color: green;"></div>
    </form>

    <script>
        console.log('üîß Script cargado');
        
        document.addEventListener('DOMContentLoaded', () => {
            console.log('üéØ DOM cargado');
            
            const form = document.getElementById('form-login');
            const nombreInput = document.getElementById('nombre');
            const correoInput = document.getElementById('correo');
            const contrase√±aInput = document.getElementById('contrase√±a');
            const mensajeExito = document.getElementById('mensaje-exito');
            
            console.log('üîç Elementos encontrados:', {
                form: form,
                nombreInput: nombreInput,
                correoInput: correoInput,
                contrase√±aInput: contrase√±aInput,
                mensajeExito: mensajeExito
            });
            
            if (form) {
                form.addEventListener('submit', (event) => {
                    event.preventDefault();
                    console.log('üîê Formulario enviado');
                    
                    const nombre = nombreInput.value.trim();
                    const correo = correoInput.value.trim();
                    const contrase√±a = contrase√±aInput.value.trim();
                    
                    console.log('üìù Datos del formulario:', { nombre, correo, contrase√±a });
                    
                    if (!nombre || !correo || !contrase√±a) {
                        mensajeExito.textContent = 'Por favor completa todos los campos';
                        mensajeExito.style.color = 'red';
                        return;
                    }
                    
                    // Simular env√≠o al backend
                    mensajeExito.textContent = 'Enviando datos al backend...';
                    mensajeExito.style.color = 'blue';
                    
                    fetch('http://localhost:8080/api/auth/login', {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json',
                        },
                        body: JSON.stringify({ correo, contrase√±a })
                    })
                    .then(response => response.json())
                    .then(result => {
                        console.log('üì° Respuesta del backend:', result);
                        
                        if (result.success) {
                            mensajeExito.textContent = '¬°Login exitoso!';
                            mensajeExito.style.color = 'green';
                        } else {
                            mensajeExito.textContent = result.message || 'Error en el login';
                            mensajeExito.style.color = 'red';
                        }
                    })
                    .catch(error => {
                        console.error('‚ùå Error:', error);
                        mensajeExito.textContent = 'Error de conexi√≥n';
                        mensajeExito.style.color = 'red';
                    });
                });
                
                console.log('‚úÖ Event listener configurado');
            } else {
                console.error('‚ùå Formulario no encontrado');
            }
        });
    </script>
</body>
</html>
